<link rel="stylesheet" type="text/css" href="css/nw100.css">
<section ng-app="nw100" class="nw100-app">
  <div ng-controller="TableController" ng-cloak>

    <div class="details">
      <p>
        Click on a column to sort the table, or choose an industry from the pull-down menu below to filter it. The last column shows a sparkline of the last five years of data for each company &mdash; click the menu in the header to choose a different subject for the graph.
      <p>
        All columns are for fiscal year 2013, except where otherwise noted. Stock prices are year-end (December 31st). Cells marked "NM" are "not meaningful."
    </div>

    <div class="controls">
      <label>Filter by industry:</label>
      <select ng-model="filterBy">
        <option value="all">All Industries</option>
        <option ng-repeat="industry in industries" value="{{industry}}">{{industry | strings}}</option>
      </select>
    </div>

    <table class="nw100-table header" sticky>
      <thead>
        <tr>
          <th ng-click="sortOn('rank')" class="sort column-rank">
            Rank
          <th ng-click="sortOn('name')" class="sort column-name">
            Company
          <th ng-click="sortOn('sector')" class="sort column-sector" ng-hide="mobile">
          <th ng-repeat="column in columns" ng-click="sortOn(column)" class="sort column-{{column}}">
            {{column | strings}}
          <th class="column-spark">
            <select ng-model="graphOn">
              <option ng-repeat="graph in graphable" value="{{graph}}">{{graph | strings}}</option>
            </select>
    </table>

    <table class="nw100-table body">
      <tbody>
        <tr ng-repeat="item in list | filter:industryFilter">
          <td class="column-rank">
            {{item.rank}}
            <span
              class="rank {{ item | compareRank }}"
              tooltip
              title="Previous rank: {{item.prev | checkNA}}"
            >
              {{ item | compareRank | rankIcons }}
            </span>
          <td class="column-name">
            {{item.name}} ({{item.symbol}})
          <td class="column-sector" ng-hide="mobile">
            <img
              ng-attr-src="{{item.sector | icon}}"
              alt="{{item.sector | strings}}"
              tooltip
            >
          <td ng-repeat="column in columns" class="column-{{column}}">
            {{formatColumn(column, item.data[2014][column])}}
          <td class="column-spark">
            <spark-line spark-data="item" column="{{graphOn}}">
    </table>

  </div>
  <script type="text/html" id="spark">
<canvas width=120 height=30></canvas>
  </script>
</section>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="js/nw100.js"></script>